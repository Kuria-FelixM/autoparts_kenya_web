"use strict";exports.id=531,exports.ids=[531],exports.modules={1863:(a,b,c)=>{c.d(b,{Xq:()=>i,Yq:()=>g,g0:()=>f,gh:()=>d,h2:()=>e,w_:()=>h});let d=(a,b=!0)=>{if(!Number.isFinite(a))return"KSh 0";let c=new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:2}).format(a);return b?c.replace("KES","KSh").trim():c.replace("KES","").trim()},e=a=>{let b=a.replace(/\D/g,"");return b.startsWith("0")&&(b="254"+b.substring(1)),b.startsWith("254")||(b="254"+b),b},f=a=>{let b=e(a);return/^254[0-9]{9}$/.test(b)},g=(a,b="short")=>{let c="string"==typeof a?new Date(a):a;return isNaN(c.getTime())?"Invalid date":c.toLocaleDateString("en-KE","short"===b?{year:"2-digit",month:"short",day:"numeric",timeZone:"Africa/Nairobi"}:{year:"numeric",month:"long",day:"numeric",weekday:"long",timeZone:"Africa/Nairobi"})},h=(a,b)=>b<=0||b>100?a:a*(1-b/100),i=a=>a?(Math.round(10*a)/10).toFixed(1):"—"},6077:(a,b,c)=>{c.d(b,{A:()=>f});var d=c(21124);c(38301);var e=c(29079);let f=({type:a="custom",title:b,description:c,icon:f,action:g,langSw:h,imageSrc:i,className:j=""})=>(0,d.jsxs)("div",{className:`flex flex-col items-center justify-center gap-6 py-16 px-4 text-center ${j}`,role:"status","aria-live":"polite",children:[i?(0,d.jsx)("img",{src:i,alt:"",className:"w-32 h-32 md:w-48 md:h-48 opacity-70 object-contain"}):(0,d.jsx)("div",{className:"text-6xl md:text-8xl",children:f||({"no-results":"\uD83D\uDD0D","empty-cart":"\uD83D\uDED2","no-favorites":"❤️","no-orders":"\uD83D\uDCE6",error:"⚠️",custom:"\uD83D\uDCED"})[a]}),(0,d.jsxs)("div",{className:"space-y-2 max-w-sm",children:[(0,d.jsx)("h2",{className:"text-h3 md:text-h2 font-montserrat font-bold text-road-grey-900",children:b}),c&&(0,d.jsx)("p",{className:"text-body-md text-road-grey-700",children:c}),h&&(0,d.jsxs)("div",{className:"pt-2 border-t border-road-grey-300 mt-4",children:[(0,d.jsx)("p",{className:"text-body-md text-road-grey-700 italic",children:h.title}),h.description&&(0,d.jsx)("p",{className:"text-body-sm text-road-grey-500",children:h.description})]})]}),g&&(0,d.jsx)(e.A,{variant:"primary",size:"lg",onClick:g.onClick,className:"mt-4",children:g.label})]})},16626:(a,b,c)=>{c.d(b,{x:()=>g});var d=c(18610),e=c(33699);let f=(a,b)=>{let c=a.reduce((a,b)=>a+b.unit_price*b.quantity,0);return{subtotal:c,total:c+(b?.delivery_cost||0)}},g=(0,d.vt)()((0,e.Zr)((a,b)=>({items:[],delivery:null,guest_email:null,guest_phone:null,subtotal:0,total:0,addItem:b=>{a(a=>{let c,{subtotal:d,total:e}=f(c=a.items.find(a=>a.product_id===b.product_id)?a.items.map(a=>a.product_id===b.product_id?{...a,quantity:a.quantity+b.quantity}:a):[...a.items,b],a.delivery);return{items:c,subtotal:d,total:e}})},removeItem:b=>{a(a=>{let c=a.items.filter(a=>a.product_id!==b),{subtotal:d,total:e}=f(c,a.delivery);return{items:c,subtotal:d,total:e}})},updateQuantity:(c,d)=>{a(a=>{if(d<=0)return b().removeItem(c),a;let e=a.items.map(a=>a.product_id===c?{...a,quantity:d}:a),{subtotal:g,total:h}=f(e,a.delivery);return{items:e,subtotal:g,total:h}})},clearCart:()=>{a({items:[],delivery:null,guest_email:null,guest_phone:null})},setDelivery:b=>{a(a=>{let{subtotal:c,total:d}=f(a.items,b);return{delivery:b,subtotal:c,total:d}})},setGuestInfo:(b,c)=>{a({guest_email:b,guest_phone:c})},getCartCount:()=>b().items.reduce((a,b)=>a+b.quantity,0),calculateTotals:()=>{let c=b(),{subtotal:d,total:e}=f(c.items,c.delivery);a({subtotal:d,total:e})}}),{name:"autoparts-cart",partialize:a=>({items:a.items,delivery:a.delivery,guest_email:a.guest_email,guest_phone:a.guest_phone,subtotal:a.subtotal,total:a.total})}))},36899:(a,b,c)=>{c.d(b,{I:()=>f});var d=c(18610),e=c(33699);let f=(0,d.vt)()((0,e.Zr)((a,b)=>({favorites:[],addFavorite:b=>{a(a=>a.favorites.find(a=>a.id===b.id)?a:{favorites:[...a.favorites,b]})},removeFavorite:b=>{a(a=>({favorites:a.favorites.filter(a=>a.id!==b)}))},isFavorited:a=>b().favorites.some(b=>b.id===a),toggleFavorite:a=>{let c=b();c.isFavorited(a.id)?c.removeFavorite(a.id):c.addFavorite(a)},clearFavorites:()=>{a({favorites:[]})},getFavoriteCount:()=>b().favorites.length}),{name:"autoparts-favorites",partialize:a=>({favorites:a.favorites})}))},61580:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(21124);c(38301);let e=({size:a="md",fullScreen:b=!1,message:c})=>{let e=(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,d.jsx)("div",{className:`${{sm:"w-8 h-8 border-2",md:"w-12 h-12 border-4",lg:"w-16 h-16 border-4"}[a]} border-road-grey-300 border-t-mechanic-blue rounded-full animate-spin-wheel`}),c&&(0,d.jsx)("p",{className:"text-body-md text-road-grey-700 font-montserrat font-semibold text-center max-w-xs",children:c})]});return b?(0,d.jsx)("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50",children:e}):e}},85554:(a,b,c)=>{c.d(b,{A:()=>s});var d=c(21124),e=c(38301),f=c.n(e),g=c(3991),h=c.n(g),i=c(24515),j=c(23673),k=c(30733),l=c(36899),m=c(16626),n=c(1863),o=c(97182),p=c(29079),q=c(10193),r=c(66518);let s=a=>{let{id:b=a.id,name:c=a.name,sku:e=a.sku,price:g=a.price||a.unit_price,discountPercentage:s=a.discountPercentage||a.discount_percentage||0,stock:t=a.stock||a.available_stock||0,reserved_stock:u=a.reserved_stock||0,primaryImage:v=a.primaryImage||a.primary_image,rating:w=a.rating||a.average_rating,reviewCount:x=a.reviewCount||a.review_count,isFeatured:y=a.isFeatured||a.is_featured||!1,isActive:z=void 0!==a.is_active?a.is_active:void 0===a.isActive||a.isActive,category:A=a.category,onAddToCart:B=a.onAddToCart}=a,{addFavorite:C,removeFavorite:D,isFavorited:E}=(0,l.I)(),{addItem:F}=(0,m.x)(),[G,H]=f().useState(!1),I="string"==typeof A?A:A?.name,J=E(b),K=(0,n.w_)(g||0,s),L=Math.max(0,(t||0)-(u||0)),M=L>0&&z,N=async()=>{H(!0);try{F({id:b,product_id:b,product_name:c,sku:e,unit_price:K>0?K:g||0,quantity:1,primary_image:v}),r.Ay.success("Added to cart! \uD83D\uDED2"),B&&B(b,1)}catch(a){r.Ay.error("Failed to add to cart")}finally{H(!1)}};return(0,d.jsxs)(q.A,{variant:"default",className:"group flex flex-col h-full overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[(0,d.jsxs)(h(),{href:`/product/${b}`,className:"flex-1 flex flex-col h-full",children:[(0,d.jsxs)("div",{className:"relative bg-road-grey-100 overflow-hidden pt-[100%] sm:pt-[120%]",children:[v&&(0,d.jsx)(i.default,{src:v,alt:c||"",fill:!0,className:"object-cover absolute inset-0 group-hover:scale-110 transition-transform duration-300",sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 25vw",priority:!1}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-fade-bottom opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,d.jsx)("div",{className:"absolute top-2 right-2",children:M?L<=3?(0,d.jsx)(o.A,{type:"custom",label:"Low Stock",customColor:"#F57F17",customBgColor:"rgba(245, 127, 23, 0.9)",size:"sm"}):null:(0,d.jsx)(o.A,{type:"custom",label:"Out of Stock",customColor:"#D32F2F",customBgColor:"rgba(211, 47, 47, 0.9)",size:"sm"})}),y&&(0,d.jsx)("div",{className:"absolute top-2 left-2",children:(0,d.jsx)(o.A,{type:"featured",label:"Featured",size:"sm"})}),s>0&&(0,d.jsxs)("div",{className:"absolute bottom-2 left-2 bg-reliable-red text-white px-2 py-1 rounded font-montserrat font-bold text-body-sm",children:["-",s,"%"]}),(0,d.jsx)("button",{onClick:a=>{a.preventDefault(),J?(D(b),r.Ay.success("Removed from favorites")):(C({id:b,name:c,sku:e,price:g,discount_percentage:s,primary_image:v,category:I}),r.Ay.success("Added to favorites"))},className:`absolute top-2 left-2 p-2 rounded-full backdrop-blur-sm transition-all duration-200 ${J?"bg-reliable-red text-white":"bg-white/80 text-road-grey-900 hover:bg-white"}`,"aria-label":J?"Remove from favorites":"Add to favorites",children:(0,d.jsx)(j.A,{className:`w-5 h-5 ${J?"fill-current":""}`})})]}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col gap-2 p-3 sm:p-4",children:[I&&(0,d.jsx)("p",{className:"text-body-sm text-road-grey-500 capitalize",children:I}),(0,d.jsx)("h3",{className:"text-h4 font-montserrat font-bold text-road-grey-900 truncate-2 group-hover:text-mechanic-blue transition-colors",children:c}),(0,d.jsx)("p",{className:"text-body-sm text-road-grey-500 font-mono uppercase",children:e}),w&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((a,b)=>(0,d.jsx)(k.A,{className:`w-4 h-4 ${b<Math.round(w)?"fill-trust-gold text-trust-gold":"text-road-grey-300"}`},b))}),(0,d.jsx)("span",{className:"text-body-sm font-semibold text-road-grey-700",children:(0,n.Xq)(w)}),x&&(0,d.jsxs)("span",{className:"text-body-sm text-road-grey-500",children:["(",x,")"]})]}),(0,d.jsx)("div",{className:"flex-1"}),(0,d.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,d.jsx)("span",{className:"text-h4 font-montserrat font-bold text-reliable-red",children:(0,n.gh)((K>0?K:g)??0)}),s>0&&(0,d.jsx)("span",{className:"text-body-sm text-road-grey-500 line-through",children:(0,n.gh)(g??0)})]})]})]}),(0,d.jsx)("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 pt-2 border-t border-road-grey-200",children:(0,d.jsx)(p.A,{variant:M?"primary":"ghost",size:"md",fullWidth:!0,disabled:!M,isLoading:G,onClick:N,children:M?"Add to Cart":"Out of Stock"})})]})}},97182:(a,b,c)=>{c.d(b,{A:()=>j});var d=c(21124);c(38301);var e=c(68324),f=c(75219),g=c(46422),h=c(30733),i=c(67748);let j=({type:a="custom",label:b,variant:c="filled",size:j="md",icon:k,customColor:l,customBgColor:m,className:n})=>{let o={genuine:{icon:(0,d.jsx)(e.A,{className:"w-3.5 h-3.5"}),color:"#FBC02D",bgColor:"rgba(251, 192, 45, 0.15)",textColor:"#F57F17"},secure:{icon:(0,d.jsx)(f.A,{className:"w-3.5 h-3.5"}),color:"#388E3C",bgColor:"rgba(56, 142, 60, 0.15)",textColor:"#1B5E20"},delivery:{icon:(0,d.jsx)(g.A,{className:"w-3.5 h-3.5"}),color:"#1976D2",bgColor:"rgba(25, 118, 210, 0.15)",textColor:"#0D47A1"},stock:{icon:(0,d.jsx)(f.A,{className:"w-3.5 h-3.5"}),color:"#388E3C",bgColor:"rgba(56, 142, 60, 0.15)",textColor:"#1B5E20"},featured:{icon:(0,d.jsx)(h.A,{className:"w-3.5 h-3.5"}),color:"#FBC02D",bgColor:"rgba(251, 192, 45, 0.15)",textColor:"#F57F17"},certified:{icon:(0,d.jsx)(f.A,{className:"w-3.5 h-3.5"}),color:"#388E3C",bgColor:"rgba(56, 142, 60, 0.15)",textColor:"#1B5E20"},trending:{icon:(0,d.jsx)(i.A,{className:"w-3.5 h-3.5"}),color:"#D32F2F",bgColor:"rgba(211, 47, 47, 0.15)",textColor:"#B71C1C"},custom:{icon:null,color:l||"#757575",bgColor:m||"rgba(117, 117, 117, 0.1)",textColor:l||"#424242"}}[a],p="sm"===j?"px-2 py-0.5 text-badge":"px-2.5 py-1 text-badge";return"outlined"===c?(0,d.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full border border-current font-montserrat font-semibold ${p} ${n}`,style:{color:o.color},children:[k||o.icon,(0,d.jsx)("span",{children:b})]}):(0,d.jsxs)("div",{className:`inline-flex items-center gap-1.5 rounded-full font-montserrat font-semibold ${p} ${n}`,style:{backgroundColor:o.bgColor,color:o.textColor},children:[k||o.icon,(0,d.jsx)("span",{children:b})]})}}};
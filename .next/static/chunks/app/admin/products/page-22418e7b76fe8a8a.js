(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},1164:(e,t,r)=>{Promise.resolve().then(r.bind(r,4639))},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(2115);let a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:u,...m}=e;return(0,s.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:r,strokeWidth:c?24*Number(o)/Number(n):o,className:a("lucide",i),...m},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,s.createElement)(n,{ref:l,iconNode:t,className:a("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...c})});return r.displayName="".concat(e),r}},4639:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(5155),a=r(2115),l=r(63),n=r(2619),o=r.n(n),c=r(6191),i=r(6651),d=r(1847);let u=(0,d.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),m=(0,d.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var x=r(1559),h=r(3875),p=r(8214),y=r(7671),g=r(8406),f=r(277),b=r(4659),j=r(2663);function N(){let e=(0,l.useRouter)(),{user:t,isAuthenticated:r}=(0,g.n)(),[n,d]=(0,a.useState)([]),[N,v]=(0,a.useState)(!0),[w,k]=(0,a.useState)("");(0,a.useEffect)(()=>{var s;if(!r||!(null==t||null==(s=t.profile)?void 0:s.is_owner))return void e.push("/auth/login");A()},[r,t,e]);let A=async()=>{try{var e;v(!0);let t=await f.PI.getProducts({page_size:100}),r=(null==t||null==(e=t.data)?void 0:e.results)||(null==t?void 0:t.results)||[];d(r)}catch(e){(0,f.hS)(e),j.oR.error("Failed to load products")}finally{v(!1)}},S=async e=>{if(confirm("Are you sure you want to delete this product?"))try{j.oR.success("Product deleted"),A()}catch(e){j.oR.error("Failed to delete product")}},P=n.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.sku.toLowerCase().includes(w.toLowerCase()));return N?(0,s.jsx)(p.A,{fullScreen:!0,message:"Loading products..."}):(0,s.jsx)("div",{className:"min-h-screen bg-road-grey-100 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-road-grey-900",children:"Products"}),(0,s.jsxs)("p",{className:"text-road-grey-600 mt-2",children:[n.length," total products"]})]}),(0,s.jsx)(o(),{href:"/admin/products/new",children:(0,s.jsxs)(x.A,{className:"flex items-center gap-2",children:[(0,s.jsx)(c.A,{className:"h-5 w-5"}),"Add Product"]})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(i.A,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-road-grey-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name or SKU...",value:w,onChange:e=>k(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-road-grey-300 rounded-lg focus:border-mechanic-blue focus:outline-none transition-colors"})]}),0===P.length?(0,s.jsx)(y.A,{type:"no-results",title:"No products found",description:"Create your first product to get started",action:{label:"Add Product",href:"/admin/products/new"}}):(0,s.jsx)(h.A,{className:"overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-road-grey-50 border-b border-road-grey-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left font-bold text-road-grey-900",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left font-bold text-road-grey-900",children:"SKU"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left font-bold text-road-grey-900",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left font-bold text-road-grey-900",children:"Stock"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left font-bold text-road-grey-900",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right font-bold text-road-grey-900",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:P.map(e=>{var t;return(0,s.jsxs)("tr",{className:"border-b border-road-grey-200 hover:bg-road-grey-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-road-grey-900",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-road-grey-600",children:null==(t=e.category)?void 0:t.name})]})}),(0,s.jsx)("td",{className:"px-6 py-4 font-mono text-road-grey-700",children:e.sku}),(0,s.jsx)("td",{className:"px-6 py-4 font-bold text-reliable-red",children:(0,b.gh)(e.price)}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-bold ".concat(e.available_stock>20?"bg-success-green/10 text-success-green":e.available_stock>5?"bg-warning-orange/10 text-warning-orange":"bg-reliable-red/10 text-reliable-red"),children:[e.available_stock," units"]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-bold ".concat(e.is_active?"bg-mechanic-blue/10 text-mechanic-blue":"bg-road-grey-200 text-road-grey-700"),children:e.is_active?"Active":"Inactive"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,s.jsx)(o(),{href:"/admin/products/".concat(e.id,"/edit"),children:(0,s.jsx)("button",{className:"p-2 text-mechanic-blue hover:bg-mechanic-blue/10 rounded-lg transition-colors",children:(0,s.jsx)(u,{className:"h-5 w-5"})})}),(0,s.jsx)("button",{onClick:()=>S(e.id),className:"p-2 text-reliable-red hover:bg-red-50 rounded-lg transition-colors",children:(0,s.jsx)(m,{className:"h-5 w-5"})})]})})]},e.id)})})]})})})]})})}},4659:(e,t,r)=>{"use strict";r.d(t,{Xq:()=>c,Yq:()=>n,g0:()=>l,gh:()=>s,h2:()=>a,w_:()=>o});let s=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!Number.isFinite(e))return"KSh 0";let r=new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);return t?r.replace("KES","KSh").trim():r.replace("KES","").trim()},a=e=>{let t=e.replace(/\D/g,"");return t.startsWith("0")&&(t="254"+t.substring(1)),t.startsWith("254")||(t="254"+t),t},l=e=>{let t=a(e);return/^254[0-9]{9}$/.test(t)},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",r="string"==typeof e?new Date(e):e;return isNaN(r.getTime())?"Invalid date":r.toLocaleDateString("en-KE","short"===t?{year:"2-digit",month:"short",day:"numeric",timeZone:"Africa/Nairobi"}:{year:"numeric",month:"long",day:"numeric",weekday:"long",timeZone:"Africa/Nairobi"})},o=(e,t)=>t<=0||t>100?e:e*(1-t/100),c=e=>e?(Math.round(10*e)/10).toFixed(1):"—"},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6651:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7671:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155);r(2115);var a=r(1559);let l=e=>{let{type:t="custom",title:r,description:l,icon:n,action:o,langSw:c,imageSrc:i,className:d=""}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 py-16 px-4 text-center ".concat(d),role:"status","aria-live":"polite",children:[i?(0,s.jsx)("img",{src:i,alt:"",className:"w-32 h-32 md:w-48 md:h-48 opacity-70 object-contain"}):(0,s.jsx)("div",{className:"text-6xl md:text-8xl",children:n||({"no-results":"\uD83D\uDD0D","empty-cart":"\uD83D\uDED2","no-favorites":"❤️","no-orders":"\uD83D\uDCE6",error:"⚠️",custom:"\uD83D\uDCED"})[t]}),(0,s.jsxs)("div",{className:"space-y-2 max-w-sm",children:[(0,s.jsx)("h2",{className:"text-h3 md:text-h2 font-montserrat font-bold text-road-grey-900",children:r}),l&&(0,s.jsx)("p",{className:"text-body-md text-road-grey-700",children:l}),c&&(0,s.jsxs)("div",{className:"pt-2 border-t border-road-grey-300 mt-4",children:[(0,s.jsx)("p",{className:"text-body-md text-road-grey-700 italic",children:c.title}),c.description&&(0,s.jsx)("p",{className:"text-body-sm text-road-grey-500",children:c.description})]})]}),o&&(0,s.jsx)(a.A,{variant:"primary",size:"lg",onClick:o.onClick,className:"mt-4",children:o.label})]})}},8214:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);r(2115);let a=e=>{let{size:t="md",fullScreen:r=!1,message:a}=e,l=(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,s.jsx)("div",{className:"".concat({sm:"w-8 h-8 border-2",md:"w-12 h-12 border-4",lg:"w-16 h-16 border-4"}[t]," border-road-grey-300 border-t-mechanic-blue rounded-full animate-spin-wheel")}),a&&(0,s.jsx)("p",{className:"text-body-md text-road-grey-700 font-montserrat font-semibold text-center max-w-xs",children:a})]});return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50",children:l}):l}}},e=>{e.O(0,[619,8,663,44,623,358],()=>e(e.s=1164)),_N_E=e.O()}]);
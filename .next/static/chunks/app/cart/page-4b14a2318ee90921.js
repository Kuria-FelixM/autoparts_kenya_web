(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{125:(e,t,r)=>{"use strict";var s=r(2115),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=s.useState,i=s.useEffect,n=s.useLayoutEffect,d=s.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!a(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),s=l({inst:{value:r,getSnapshot:t}}),a=s[0].inst,c=s[1];return n(function(){a.value=r,a.getSnapshot=t,o(a)&&c({inst:a})},[e,r,t]),i(function(){return o(a)&&c({inst:a}),e(function(){o(a)&&c({inst:a})})},[e]),d(r),r};t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:c},1043:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(5155),a=r(2115);let l=(0,r(1847).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var i=r(6191),n=r(5229),d=r(2619),o=r.n(d),c=r(5239),u=r(6262),m=r(4659),h=r(1559),x=r(7671),p=r(3875),y=r(2663);let v=[{id:"economy",label:"Economy",value:500,days:"5-7 days",description:"Standard delivery"},{id:"standard",label:"Standard",value:1500,days:"2-3 days",description:"Recommended"},{id:"express",label:"Express",value:3e3,days:"Nairobi 1-2 days",description:"Fastest"}];function g(e){let{id:t,product_name:r,sku:a,unit_price:d,quantity:u,primary_image:h,onRemove:x,onUpdateQuantity:v}=e;return(0,s.jsxs)(p.A,{className:"flex gap-4 p-4",children:[(0,s.jsx)("div",{className:"relative w-20 h-20 flex-shrink-0 bg-road-grey-100 rounded-lg overflow-hidden",children:h&&(0,s.jsx)(c.default,{src:h,alt:r,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-bold text-road-grey-900 truncate hover:text-mechanic-blue transition-colors",children:(0,s.jsx)(o(),{href:"/product/".concat(t),children:r})}),(0,s.jsxs)("p",{className:"text-sm text-road-grey-600 mt-1",children:["SKU: ",a]}),(0,s.jsx)("p",{className:"text-lg font-bold text-reliable-red mt-2",children:(0,m.gh)(d)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-end",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 border border-road-grey-300 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>v(Math.max(1,u-1)),className:"p-1 hover:bg-road-grey-100 rounded transition-colors","aria-label":"Decrease quantity",children:(0,s.jsx)(l,{className:"h-4 w-4 text-road-grey-600"})}),(0,s.jsx)("span",{className:"px-3 py-1 font-semibold text-road-grey-900",children:u}),(0,s.jsx)("button",{onClick:()=>v(u+1),className:"p-1 hover:bg-road-grey-100 rounded transition-colors","aria-label":"Increase quantity",children:(0,s.jsx)(i.A,{className:"h-4 w-4 text-road-grey-600"})})]}),(0,s.jsx)("button",{onClick:()=>{x(),y.oR.success("Removed from cart")},className:"p-2 text-road-grey-600 hover:text-reliable-red hover:bg-red-50 rounded-lg transition-colors","aria-label":"Remove item",children:(0,s.jsx)(n.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xs text-road-grey-600 mb-2",children:"Subtotal"}),(0,s.jsx)("p",{className:"text-xl font-bold text-road-grey-900",children:(0,m.gh)(d*u)})]})]})}function b(){let{items:e,subtotal:t,delivery:r,setDelivery:l,removeItem:i,updateQuantity:n,clearCart:d}=(0,u.x)(),[c,b]=(0,a.useState)(r&&v.find(e=>e.id===r.type)||null),[f,j]=(0,a.useState)("");if(0===e.length)return(0,s.jsx)("div",{className:"min-h-screen pb-20 md:pb-0 p-4 bg-road-grey-100",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsx)(x.A,{type:"empty-cart",title:"Your cart is empty",description:"Start shopping to add items to your cart",action:{label:"Continue Shopping",href:"/search"}})})});let N=(null==c?void 0:c.value)||0;return(0,s.jsx)("div",{className:"min-h-screen bg-road-grey-100 pb-20 md:pb-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-4 md:p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-road-grey-900",children:"Shopping Cart"}),(0,s.jsxs)("p",{className:"text-road-grey-600 mt-2",children:[e.length," items"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsx)(g,{...e,onRemove:()=>i(e.product_id),onUpdateQuantity:t=>n(e.product_id,t)},e.product_id))}),(0,s.jsxs)(p.A,{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-bold text-road-grey-900 mb-3",children:"Have a promo code?"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"Enter promo code",className:"flex-1 px-3 py-2 border border-road-grey-300 rounded-lg focus:border-mechanic-blue focus:outline-none"}),(0,s.jsx)(h.A,{variant:"secondary",onClick:()=>{f&&y.oR.error("Promo codes not yet supported")},children:"Apply"})]})]}),(0,s.jsx)("button",{onClick:()=>{confirm("Are you sure you want to clear your cart?")&&(d(),y.oR.success("Cart cleared"))},className:"text-road-grey-600 hover:text-reliable-red text-sm font-medium transition-colors",children:"Clear Cart"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(p.A,{className:"p-4 space-y-3",children:[(0,s.jsx)("h3",{className:"font-bold text-road-grey-900",children:"Delivery Method"}),v.map(e=>(0,s.jsx)("button",{onClick:()=>{b(e),l({type:e.id,address:"",city:"",postal_code:"",recipient_name:"",recipient_phone:"",estimated_days:{min:1,max:7},delivery_cost:e.value})},className:"w-full text-left p-3 rounded-lg border-2 transition-all ".concat((null==c?void 0:c.id)===e.id?"border-mechanic-blue bg-mechanic-blue/5":"border-road-grey-300 hover:border-mechanic-blue"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-road-grey-900",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-road-grey-600 mt-1",children:e.days}),(0,s.jsx)("p",{className:"text-xs text-road-grey-500",children:e.description})]}),(0,s.jsx)("p",{className:"font-bold text-mechanic-blue",children:(0,m.gh)(e.value)})]})},e.id))]}),(0,s.jsxs)(p.A,{className:"p-4 space-y-3 bg-road-grey-50",children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-road-grey-600",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsx)("span",{children:(0,m.gh)(t)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-road-grey-600",children:[(0,s.jsx)("span",{children:"Delivery:"}),(0,s.jsx)("span",{children:(0,m.gh)(N)})]}),(0,s.jsxs)("div",{className:"border-t border-road-grey-300 pt-3 flex justify-between text-lg font-bold text-road-grey-900",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsx)("span",{className:"text-reliable-red",children:(0,m.gh)(t+N)})]})]}),(0,s.jsx)(o(),{href:"/checkout",className:"block mt-4",children:(0,s.jsx)(h.A,{variant:"primary",fullWidth:!0,size:"lg",children:"Proceed to Checkout"})}),(0,s.jsx)(o(),{href:"/search",className:"block",children:(0,s.jsx)(h.A,{variant:"ghost",fullWidth:!0,size:"md",children:"Continue Shopping"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-trust-gold text-lg",children:"✓"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-road-grey-900",children:"Genuine Parts"}),(0,s.jsx)("p",{className:"text-road-grey-600 text-xs",children:"100% authentic"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-success-green text-lg",children:"✓"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-road-grey-900",children:"Secure M-Pesa"}),(0,s.jsx)("p",{className:"text-road-grey-600 text-xs",children:"Safe payments"})]})]}),(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("span",{className:"text-mechanic-blue text-lg",children:"✓"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-road-grey-900",children:"Fast Delivery"}),(0,s.jsx)("p",{className:"text-road-grey-600 text-xs",children:"Nairobi 1-2 days"})]})]})]})]})]})]})})}},1559:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(5155),a=r(2115),l=r(2821);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=l.$,d=((e,t)=>r=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:a,defaultVariants:l}=t,d=Object.keys(a).map(e=>{let t=null==r?void 0:r[e],s=null==l?void 0:l[e];if(null===t)return null;let n=i(t)||i(s);return a[e][n]}),o=r&&Object.entries(r).reduce((e,t)=>{let[r,s]=t;return void 0===s||(e[r]=s),e},{});return n(e,d,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:r,className:s,...a}=t;return Object.entries(a).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...o}[t]):({...l,...o})[t]===r})?[...e,r,s]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)})("inline-flex items-center justify-center gap-2 rounded-lg font-montserrat font-semibold transition-all duration-200 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-mechanic-blue disabled:opacity-60 disabled:cursor-not-allowed tap-highlight-transparent",{variants:{variant:{primary:"bg-reliable-red text-white hover:bg-red-700 active:scale-95 shadow-md hover:shadow-lg",secondary:"bg-white border-2 border-mechanic-blue text-mechanic-blue hover:bg-mechanic-blue/10 active:scale-95",ghost:"bg-transparent text-mechanic-blue hover:bg-mechanic-blue/10 active:scale-95",danger:"bg-reliable-red/20 text-reliable-red hover:bg-reliable-red/30 active:scale-95",success:"bg-success-green text-white hover:bg-green-700 active:scale-95 shadow-md"},size:{sm:"px-3 py-2 text-body-sm h-10",md:"px-4 py-2.5 text-body-md h-12",lg:"px-6 py-3 text-body-md h-14",xl:"px-8 py-4 text-body-lg h-16",icon:"p-2 h-10 w-10","icon-lg":"p-3 h-12 w-12"},fullWidth:{true:"w-full",false:"w-auto"},loading:{true:"opacity-70 pointer-events-none",false:""}},defaultVariants:{variant:"primary",size:"md",fullWidth:!1,loading:!1}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,fullWidth:i,isLoading:n,loading:o,disabled:c,children:u,...m}=e,h=c||n||o;return(0,s.jsx)("button",{className:d({variant:a,size:l,fullWidth:i,loading:n||o,className:r}),disabled:null!=h?h:void 0,ref:t,...m,children:n||o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 animate-spin-wheel border-2 border-currentColor border-t-transparent rounded-full"}),(0,s.jsx)("span",{children:"Loading..."})]}):u})});o.displayName="Button";let c=o},2821:(e,t,r)=>{"use strict";function s(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{$:()=>s})},3654:(e,t,r)=>{"use strict";var s=r(2115),a=r(4806),l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,n=s.useRef,d=s.useEffect,o=s.useMemo,c=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var u=n(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var h=i(e,(u=o(function(){function e(e){if(!d){if(d=!0,i=e,e=s(e),void 0!==a&&m.hasValue){var t=m.value;if(a(t,e))return n=t}return n=e}if(t=n,l(i,e))return t;var r=s(e);return void 0!==a&&a(t,r)?(i=e,t):(i=e,n=r)}var i,n,d=!1,o=void 0===r?null:r;return[function(){return e(t())},null===o?void 0:function(){return e(o())}]},[t,r,s,a]))[0],u[1]);return d(function(){m.hasValue=!0,m.value=h},[h]),c(h),h}},3875:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);r(2115);let a=e=>{let{children:t,variant:r="default",hoverable:a=!1,onClick:l,className:i=""}=e;return(0,s.jsx)("div",{className:"".concat("bg-white rounded-lg overflow-hidden transition-all duration-200"," ").concat({default:"shadow-md",elevated:"shadow-lg",outlined:"border border-road-grey-300"}[r]," ").concat(a?"hover:shadow-lg cursor-pointer hover:scale-105":""," ").concat(i),onClick:l,role:l?"button":void 0,tabIndex:l?0:void 0,onKeyDown:l?e=>{("Enter"===e.key||" "===e.key)&&l()}:void 0,children:t})}},4659:(e,t,r)=>{"use strict";r.d(t,{Xq:()=>d,Yq:()=>i,g0:()=>l,gh:()=>s,h2:()=>a,w_:()=>n});let s=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!Number.isFinite(e))return"KSh 0";let r=new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);return t?r.replace("KES","KSh").trim():r.replace("KES","").trim()},a=e=>{let t=e.replace(/\D/g,"");return t.startsWith("0")&&(t="254"+t.substring(1)),t.startsWith("254")||(t="254"+t),t},l=e=>{let t=a(e);return/^254[0-9]{9}$/.test(t)},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",r="string"==typeof e?new Date(e):e;return isNaN(r.getTime())?"Invalid date":r.toLocaleDateString("en-KE","short"===t?{year:"2-digit",month:"short",day:"numeric",timeZone:"Africa/Nairobi"}:{year:"numeric",month:"long",day:"numeric",weekday:"long",timeZone:"Africa/Nairobi"})},n=(e,t)=>t<=0||t>100?e:e*(1-t/100),d=e=>e?(Math.round(10*e)/10).toFixed(1):"—"},4806:(e,t,r)=>{"use strict";e.exports=r(125)},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5308:(e,t,r)=>{Promise.resolve().then(r.bind(r,1043))},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6262:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var s=r(5988),a=r(9863);let l=(e,t)=>{let r=e.reduce((e,t)=>e+t.unit_price*t.quantity,0);return{subtotal:r,total:r+((null==t?void 0:t.delivery_cost)||0)}},i=(0,s.vt)()((0,a.Zr)((e,t)=>({items:[],delivery:null,guest_email:null,guest_phone:null,subtotal:0,total:0,addItem:t=>{e(e=>{let r,{subtotal:s,total:a}=l(r=e.items.find(e=>e.product_id===t.product_id)?e.items.map(e=>e.product_id===t.product_id?{...e,quantity:e.quantity+t.quantity}:e):[...e.items,t],e.delivery);return{items:r,subtotal:s,total:a}})},removeItem:t=>{e(e=>{let r=e.items.filter(e=>e.product_id!==t),{subtotal:s,total:a}=l(r,e.delivery);return{items:r,subtotal:s,total:a}})},updateQuantity:(r,s)=>{e(e=>{if(s<=0)return t().removeItem(r),e;let a=e.items.map(e=>e.product_id===r?{...e,quantity:s}:e),{subtotal:i,total:n}=l(a,e.delivery);return{items:a,subtotal:i,total:n}})},clearCart:()=>{e({items:[],delivery:null,guest_email:null,guest_phone:null})},setDelivery:t=>{e(e=>{let{subtotal:r,total:s}=l(e.items,t);return{delivery:t,subtotal:r,total:s}})},setGuestInfo:(t,r)=>{e({guest_email:t,guest_phone:r})},getCartCount:()=>t().items.reduce((e,t)=>e+t.quantity,0),calculateTotals:()=>{let r=t(),{subtotal:s,total:a}=l(r.items,r.delivery);e({subtotal:s,total:a})}}),{name:"autoparts-cart",partialize:e=>({items:e.items,delivery:e.delivery,guest_email:e.guest_email,guest_phone:e.guest_phone,subtotal:e.subtotal,total:e.total})}))},7671:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155);r(2115);var a=r(1559);let l=e=>{let{type:t="custom",title:r,description:l,icon:i,action:n,langSw:d,imageSrc:o,className:c=""}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 py-16 px-4 text-center ".concat(c),role:"status","aria-live":"polite",children:[o?(0,s.jsx)("img",{src:o,alt:"",className:"w-32 h-32 md:w-48 md:h-48 opacity-70 object-contain"}):(0,s.jsx)("div",{className:"text-6xl md:text-8xl",children:i||({"no-results":"\uD83D\uDD0D","empty-cart":"\uD83D\uDED2","no-favorites":"❤️","no-orders":"\uD83D\uDCE6",error:"⚠️",custom:"\uD83D\uDCED"})[t]}),(0,s.jsxs)("div",{className:"space-y-2 max-w-sm",children:[(0,s.jsx)("h2",{className:"text-h3 md:text-h2 font-montserrat font-bold text-road-grey-900",children:r}),l&&(0,s.jsx)("p",{className:"text-body-md text-road-grey-700",children:l}),d&&(0,s.jsxs)("div",{className:"pt-2 border-t border-road-grey-300 mt-4",children:[(0,s.jsx)("p",{className:"text-body-md text-road-grey-700 italic",children:d.title}),d.description&&(0,s.jsx)("p",{className:"text-body-sm text-road-grey-500",children:d.description})]})]}),n&&(0,s.jsx)(a.A,{variant:"primary",size:"lg",onClick:n.onClick,className:"mt-4",children:n.label})]})}},8828:(e,t,r)=>{"use strict";e.exports=r(3654)}},e=>{e.O(0,[619,8,663,473,623,358],()=>e(e.s=5308)),_N_E=e.O()}]);
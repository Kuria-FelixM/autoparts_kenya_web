(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{269:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>R});var r=t(5155),s=t(2115),l=t(63),i=t(2619),o=t.n(i),c=t(5947),d=t(3457),n=t(6398),x=t(9347),m=t(5239);let h=(0,t(1847).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var g=t(7937),p=t(7258);function u(e){let{images:a,alt:t,className:l}=e,[i,o]=(0,s.useState)(0),[c,d]=(0,s.useState)(!1),n=a[i];return(0,r.jsxs)("div",{className:(0,p.cn)("space-y-4",l),children:[(0,r.jsxs)("div",{className:"relative bg-road-grey-100 rounded-lg overflow-hidden aspect-square",children:[(0,r.jsx)(m.default,{src:n,alt:t,fill:!0,className:(0,p.cn)("object-cover transition-transform duration-300",c&&"scale-150 cursor-zoom-out",!c&&"cursor-zoom-in"),onClick:()=>d(!c),priority:!0}),a.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{o(e=>0===e?a.length-1:e-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-road-grey-900 p-2 rounded-full transition-colors","aria-label":"Previous image",children:(0,r.jsx)(h,{className:"h-6 w-6"})}),(0,r.jsx)("button",{onClick:()=>{o(e=>e===a.length-1?0:e+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white text-road-grey-900 p-2 rounded-full transition-colors","aria-label":"Next image",children:(0,r.jsx)(g.A,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded-full text-xs font-bold",children:[i+1," / ",a.length]})]}),a.length>1&&(0,r.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2",children:a.map((e,a)=>(0,r.jsx)("button",{onClick:()=>{o(a),d(!1)},className:(0,p.cn)("flex-shrink-0 relative w-16 h-16 rounded-lg overflow-hidden border-2 transition-all",a===i?"border-mechanic-blue":"border-road-grey-300 hover:border-mechanic-blue"),children:(0,r.jsx)(m.default,{src:e,alt:"".concat(t," thumbnail ").concat(a+1),fill:!0,className:"object-cover"})},a))})]})}var y=t(4033);function b(e){let{vehicles:a,className:t}=e,[l,i]=(0,s.useState)(!1);if(!a||0===a.length)return(0,r.jsx)("div",{className:(0,p.cn)("p-4 bg-road-grey-50 rounded-lg border border-road-grey-300",t),children:(0,r.jsx)("p",{className:"text-sm text-road-grey-600",children:"No vehicle data available"})});let o=l?a:a.slice(0,5);return(0,r.jsxs)("div",{className:t,children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-road-grey-900 mb-4",children:"Compatible Vehicles"}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-mechanic-blue/10 border-b border-road-grey-300",children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left font-bold text-road-grey-900",children:"Make"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left font-bold text-road-grey-900",children:"Model"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left font-bold text-road-grey-900",children:"Years"})]})}),(0,r.jsx)("tbody",{children:o.map((e,a)=>(0,r.jsxs)("tr",{className:"border-b border-road-grey-200 hover:bg-road-grey-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-4 py-3 font-semibold text-road-grey-900",children:e.make}),(0,r.jsx)("td",{className:"px-4 py-3 text-road-grey-700",children:e.model}),(0,r.jsx)("td",{className:"px-4 py-3 text-road-grey-600",children:e.year_from===e.year_to?e.year_from:"".concat(e.year_from,"–").concat(e.year_to)})]},a))})]})}),a.length>5&&(0,r.jsxs)("button",{onClick:()=>i(!l),className:"flex items-center gap-2 mt-4 px-4 py-2 text-mechanic-blue hover:text-mechanic-blue/80 font-semibold text-sm transition-colors",children:[l?"Show Less":"Show All (".concat(a.length,")"),(0,r.jsx)(y.A,{className:(0,p.cn)("h-4 w-4 transition-transform",l&&"rotate-180")})]})]})}var f=t(7392);function j(e){let{products:a,title:t="Related Products",className:l}=e,[i,o]=(0,s.useState)(0),c=s.useRef(null),d=e=>{if(!c.current)return;let a=c.current,t="left"===e?Math.max(0,i-320):i+320;a.scrollTo({left:t,behavior:"smooth"}),o(t)};if(!a||0===a.length)return null;let n=c.current&&i<c.current.scrollWidth-c.current.clientWidth;return(0,r.jsxs)("div",{className:(0,p.cn)("space-y-4",l),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"font-bold text-lg text-road-grey-900",children:t}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>d("left"),disabled:0===i,className:"flex items-center justify-center h-10 w-10 rounded-full bg-road-grey-100 hover:bg-road-grey-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Scroll left",children:(0,r.jsx)(h,{className:"h-5 w-5 text-road-grey-700"})}),(0,r.jsx)("button",{onClick:()=>d("right"),disabled:!n,className:"flex items-center justify-center h-10 w-10 rounded-full bg-road-grey-100 hover:bg-road-grey-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Scroll right",children:(0,r.jsx)(g.A,{className:"h-5 w-5 text-road-grey-700"})})]})]}),(0,r.jsx)("div",{ref:c,className:"flex gap-4 overflow-x-auto snap-x snap-mandatory scroll-smooth pb-2 -mx-4 px-4",role:"region","aria-label":t,children:a.map(e=>(0,r.jsx)("div",{className:"flex-shrink-0 w-64 snap-start",children:(0,r.jsx)(f.A,{...e})},e.id))})]})}var v=t(1559),N=t(4210),w=t(8214),k=t(7671),_=t(277),A=t(6262),S=t(8345),C=t(4659),P=t(2663);function R(){var e,a,t;let i=(0,l.useParams)().id,[m,h]=(0,s.useState)(null),[g,p]=(0,s.useState)([]),[y,f]=(0,s.useState)(!0),[R,I]=(0,s.useState)(!1),{addItem:M}=(0,A.x)(),{isFavorited:E,toggleFavorite:F}=(0,S.I)();(0,s.useEffect)(()=>{O()},[i]);let O=async()=>{try{f(!0);let e=(await _.PI.getProductDetail(Number(i))).data;if(h(e),e.category_id)try{let a=await _.PI.getProducts({category:e.category_id,page_size:8});p(a.data.results.filter(a=>a.id!==e.id).slice(0,5))}catch{}}catch(e){(0,_.hS)(e),P.oR.error("Failed to load product")}finally{f(!1)}},T=async()=>{if(m){I(!0);try{M({id:m.id,product_id:m.id,product_name:m.name,sku:m.sku,unit_price:m.discounted_price>0?m.discounted_price:m.price,quantity:1,primary_image:m.primary_image}),P.oR.success("Added to cart! \uD83D\uDED2")}catch(e){P.oR.error("Failed to add to cart")}finally{I(!1)}}};if(y)return(0,r.jsx)(w.A,{fullScreen:!0,message:"Loading product details..."});if(!m)return(0,r.jsx)("div",{className:"min-h-screen pb-20 md:pb-0 p-4",children:(0,r.jsx)(k.A,{type:"error",title:"Product not found",description:"The product you're looking for doesn't exist or has been removed.",action:{label:"Back to Shopping",href:"/search"}})});let L=((null==(e=m.images)?void 0:e.map(e=>e.image))||[m.primary_image]).filter(Boolean),V=m.discounted_price>0?Math.round((m.price-m.discounted_price)/m.price*100):0;return(0,r.jsx)("div",{className:"min-h-screen bg-road-grey-100 pb-20 md:pb-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-4 md:p-6 space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-white rounded-lg p-4 md:p-6",children:[(0,r.jsx)(u,{images:L,alt:m.name}),(0,r.jsxs)(c.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-road-grey-900",children:m.name}),(0,r.jsxs)("p",{className:"text-sm text-road-grey-600 mt-1",children:["SKU: ",m.sku]})]}),(0,r.jsx)("button",{onClick:()=>{m&&(F({id:m.id,name:m.name,sku:m.sku,price:m.price,discount_percentage:m.discount_percentage,primary_image:m.primary_image,category:m.category.name}),P.oR.success(E(m.id)?"Removed from favorites":"Added to favorites ❤️"))},className:"flex-shrink-0 p-3 rounded-full hover:bg-road-grey-100 transition-colors","aria-label":E(m.id)?"Remove from favorites":"Add to favorites",children:(0,r.jsx)(d.A,{className:"h-6 w-6 transition-colors ".concat(E(m.id)?"fill-reliable-red text-reliable-red":"text-road-grey-400 hover:text-reliable-red")})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[m.is_featured&&(0,r.jsx)(N.A,{type:"featured",label:"Featured"}),m.available_stock>10&&(0,r.jsx)(N.A,{type:"stock",label:"In Stock"}),m.available_stock>0&&m.available_stock<=10&&(0,r.jsx)(N.A,{type:"stock",label:"Limited Stock",customColor:"warning-orange"}),0===m.available_stock&&(0,r.jsx)(N.A,{type:"custom",label:"Out of Stock",customColor:"road-grey-500"})]})]}),(0,r.jsx)("div",{className:"space-y-2 pb-4 border-b border-road-grey-200",children:(0,r.jsxs)("div",{className:"flex items-baseline gap-3",children:[(0,r.jsx)("span",{className:"text-3xl font-bold text-reliable-red",children:(0,C.gh)(m.discounted_price>0?m.discounted_price:m.price)}),m.discounted_price>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lg text-road-grey-500 line-through",children:(0,C.gh)(m.price)}),(0,r.jsx)(N.A,{type:"custom",label:"-".concat(V,"%"),customColor:"reliable-red"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"p-3 bg-road-grey-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-xs text-road-grey-600 font-semibold mb-1",children:"STOCK STATUS"}),(0,r.jsx)("p",{className:"font-bold text-road-grey-900",children:m.available_stock>0?"".concat(m.available_stock," units"):"Out of Stock"})]}),(0,r.jsxs)("div",{className:"p-3 bg-road-grey-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 text-mechanic-blue"}),(0,r.jsx)("p",{className:"text-xs text-road-grey-600 font-semibold",children:"DELIVERY"})]}),(0,r.jsx)("p",{className:"font-bold text-road-grey-900",children:"Nairobi 1-2 days"})]})]}),m.rating&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex gap-1",children:Array.from({length:5}).map((e,a)=>(0,r.jsx)(x.A,{className:"h-5 w-5 ".concat(a<Math.floor(m.rating)?"fill-trust-gold text-trust-gold":"text-road-grey-300")},a))}),(0,r.jsxs)("span",{className:"text-sm text-road-grey-600",children:[null==(a=m.rating)?void 0:a.toFixed(1)," (",m.review_count||0," reviews)"]})]}),(0,r.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,r.jsx)(v.A,{variant:"primary",size:"lg",fullWidth:!0,onClick:T,isLoading:R,disabled:0===m.available_stock,children:0===m.available_stock?"Out of Stock":"Add to Cart"}),(0,r.jsx)(o(),{href:"/cart",className:"block",children:(0,r.jsx)(v.A,{variant:"secondary",size:"lg",fullWidth:!0,children:"Buy Now"})})]})]})]}),m.compatible_vehicles&&m.compatible_vehicles.length>0&&(0,r.jsx)(c.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg p-4 md:p-6",children:(0,r.jsx)(b,{vehicles:m.compatible_vehicles.map(e=>({make:e.make.name,model:e.name,year_from:e.year_from||2e3,year_to:e.year_to||new Date().getFullYear()}))})}),(0,r.jsxs)(c.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"md:col-span-2 bg-white rounded-lg p-4 md:p-6 space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-road-grey-900 mb-3",children:"Description"}),(0,r.jsx)("p",{className:"text-road-grey-700 leading-relaxed whitespace-pre-wrap",children:m.description})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 md:p-6 space-y-4 h-fit",children:[(0,r.jsx)("h3",{className:"font-bold text-road-grey-900",children:"Product Details"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-road-grey-600 mb-1",children:"CATEGORY"}),(0,r.jsx)("p",{className:"text-road-grey-900",children:null==(t=m.category)?void 0:t.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold text-road-grey-600 mb-1",children:"SKU"}),(0,r.jsx)("p",{className:"text-road-grey-900 font-mono",children:m.sku})]})]})]})]}),g.length>0&&(0,r.jsx)(c.P.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg p-4 md:p-6",children:(0,r.jsx)(j,{products:g})})]})})}},6398:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},7937:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(1847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},9731:(e,a,t)=>{Promise.resolve().then(t.bind(t,269))}},e=>{e.O(0,[619,8,663,44,947,473,49,185,623,358],()=>e(e.s=9731)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{63:(e,s,r)=>{"use strict";var a=r(7260);r.o(a,"useParams")&&r.d(s,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(s,{useSearchParams:function(){return a.useSearchParams}})},2271:(e,s,r)=>{Promise.resolve().then(r.bind(r,5064))},5064:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var a=r(5155),t=r(2115),l=r(2619),n=r.n(l),c=r(63),i=r(5947),d=r(1559),o=r(3875),u=r(8406),m=r(277),x=r(2663),h=r(8214);function f(){let e=(0,c.useRouter)(),s=(0,c.useSearchParams)().get("redirect")||"/",{setUser:r,setTokens:l}=(0,u.n)(),[h,f]=(0,t.useState)(""),[g,b]=(0,t.useState)(""),[j,y]=(0,t.useState)(!1),[p,v]=(0,t.useState)(""),N=async a=>{a.preventDefault(),v(""),y(!0);try{if(!h||!g)return void v("Please fill in all fields");let a=await m.PI.login({username:h,password:g}),t=(null==a?void 0:a.data)||a;r(t.user),l({access:t.access,refresh:t.refresh}),x.oR.success("Logged in successfully!"),e.push(s)}catch(e){v((0,m.hS)(e)||"Login failed. Please try again."),x.oR.error("Login failed")}finally{y(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-mechanic-blue/10 to-road-grey-100 flex items-center justify-center p-4",children:(0,a.jsxs)(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:[(0,a.jsxs)(o.A,{className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mb-4",children:(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-mechanic-blue flex items-center justify-center text-white font-bold text-lg",children:"AP"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-road-grey-900",children:"Log In"}),(0,a.jsx)("p",{className:"text-road-grey-600",children:"Welcome back to AutoParts Kenya"})]}),p&&(0,a.jsx)("div",{className:"bg-red-50 border border-reliable-red/20 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-sm text-reliable-red",children:p})}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Email or Username"}),(0,a.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),placeholder:"your@email.com",className:"w-full px-4 py-3 border border-road-grey-300 rounded-lg focus:border-mechanic-blue focus:outline-none focus:ring-1 focus:ring-mechanic-blue transition-colors",disabled:j})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",value:g,onChange:e=>b(e.target.value),placeholder:"••••••••",className:"w-full px-4 py-3 border border-road-grey-300 rounded-lg focus:border-mechanic-blue focus:outline-none focus:ring-1 focus:ring-mechanic-blue transition-colors",disabled:j})]}),(0,a.jsx)(d.A,{variant:"primary",size:"lg",fullWidth:!0,type:"submit",isLoading:j,children:"Log In"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-road-grey-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-white text-road-grey-600",children:"Don't have an account?"})})]}),(0,a.jsx)(n(),{href:"/auth/register",className:"block",children:(0,a.jsx)(d.A,{variant:"secondary",size:"lg",fullWidth:!0,children:"Create Account"})}),(0,a.jsxs)("div",{className:"text-center space-y-3",children:[(0,a.jsx)("p",{className:"text-sm text-road-grey-600",children:"Or continue shopping"}),(0,a.jsx)(n(),{href:"/",className:"block",children:(0,a.jsx)(d.A,{variant:"ghost",size:"md",fullWidth:!0,children:"Continue as Guest"})})]}),(0,a.jsxs)("div",{className:"text-center text-xs text-road-grey-600",children:[(0,a.jsx)("p",{children:"By logging in, you agree to our"}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center mt-2",children:[(0,a.jsx)(n(),{href:"/terms",className:"text-mechanic-blue hover:underline",children:"Terms of Service"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)(n(),{href:"/privacy",className:"text-mechanic-blue hover:underline",children:"Privacy Policy"})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 text-center space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-road-grey-600",children:[(0,a.jsx)("span",{children:"✓"}),(0,a.jsx)("span",{children:"Secure M-Pesa"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-road-grey-600",children:[(0,a.jsx)("span",{children:"✓"}),(0,a.jsx)("span",{children:"Genuine Parts Guaranteed"})]})]})]})})}function g(){return(0,a.jsx)(t.Suspense,{fallback:(0,a.jsx)(h.A,{fullScreen:!0,message:"Loading login..."}),children:(0,a.jsx)(f,{})})}},8214:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});var a=r(5155);r(2115);let t=e=>{let{size:s="md",fullScreen:r=!1,message:t}=e,l=(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,a.jsx)("div",{className:"".concat({sm:"w-8 h-8 border-2",md:"w-12 h-12 border-4",lg:"w-16 h-16 border-4"}[s]," border-road-grey-300 border-t-mechanic-blue rounded-full animate-spin-wheel")}),t&&(0,a.jsx)("p",{className:"text-body-md text-road-grey-700 font-montserrat font-semibold text-center max-w-xs",children:t})]});return r?(0,a.jsx)("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50",children:l}):l}}},e=>{e.O(0,[619,8,663,44,947,623,358],()=>e(e.s=2271)),_N_E=e.O()}]);
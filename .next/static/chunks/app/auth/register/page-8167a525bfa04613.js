(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{63:(e,r,s)=>{"use strict";var a=s(7260);s.o(a,"useParams")&&s.d(r,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(r,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})},454:(e,r,s)=>{Promise.resolve().then(s.bind(s,2150))},2150:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>p});var a=s(5155),t=s(2115),l=s(2619),i=s.n(l),n=s(63),o=s(5947),c=s(1559),d=s(3875),m=s(8406),u=s(277),h=s(4659),x=s(2663);function p(){let e=(0,n.useRouter)(),{setUser:r,setTokens:s}=(0,m.n)(),[l,p]=(0,t.useState)("details"),[b,f]=(0,t.useState)({first_name:"",last_name:"",email:"",phone:"",password:"",password_confirm:""}),[y,g]=(0,t.useState)(!1),[j,N]=(0,t.useState)({}),v=e=>{let{name:r,value:s}=e.target;f(e=>({...e,[r]:s})),j[r]&&N(e=>{let s={...e};return delete s[r],s})},w=()=>{let e={};return"details"===l?(b.first_name||(e.first_name="First name is required"),b.last_name||(e.last_name="Last name is required"),b.email||(e.email="Email is required"),b.email.includes("@")||(e.email="Invalid email")):"phone"===l?(b.phone||(e.phone="Phone is required"),(0,h.g0)(b.phone)||(e.phone="Invalid Kenyan phone number (0722123456)")):"password"===l&&(b.password||(e.password="Password is required"),b.password.length<8&&(e.password="Password must be at least 8 characters"),b.password!==b.password_confirm&&(e.password_confirm="Passwords do not match")),N(e),0===Object.keys(e).length},_=async a=>{if(a.preventDefault(),w()){g(!0);try{let a={first_name:b.first_name,last_name:b.last_name,username:b.email,email:b.email,phone_number:(0,h.h2)(b.phone),password:b.password,password_confirm:b.password},t=await u.PI.register(a),l=(null==t?void 0:t.data)||t;r(l.user),s({access:l.access,refresh:l.refresh}),x.oR.success("Account created successfully!"),e.push("/profile")}catch(r){let e=(0,u.hS)(r);x.oR.error(e||"Registration failed")}finally{g(!1)}}},P={details:1,phone:2,password:3,vehicles:4}[l];return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-mechanic-blue/10 to-road-grey-100 flex items-center justify-center p-4 py-12",children:(0,a.jsx)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:(0,a.jsxs)(d.A,{className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mb-4",children:(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-mechanic-blue flex items-center justify-center text-white font-bold text-lg",children:"AP"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-road-grey-900",children:"Create Account"}),(0,a.jsxs)("p",{className:"text-road-grey-600",children:["details"===l&&"Tell us about yourself","phone"===l&&"How can we reach you?","password"===l&&"Secure your account","vehicles"===l&&"Add your vehicles (optional)"]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:[1,2,3,4].map(e=>(0,a.jsx)("div",{className:"h-1 flex-1 rounded-full transition-colors ".concat(e<=P?"bg-mechanic-blue":"bg-road-grey-300")},e))}),(0,a.jsxs)("form",{onSubmit:"vehicles"===l?_:e=>{e.preventDefault(),w()&&p({details:"phone",phone:"password",password:"vehicles"}[l]||"vehicles")},className:"space-y-4",children:["details"===l&&(0,a.jsxs)(o.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"First Name"}),(0,a.jsx)("input",{type:"text",name:"first_name",value:b.first_name,onChange:v,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-1 ".concat(j.first_name?"border-reliable-red focus:ring-reliable-red":"border-road-grey-300 focus:border-mechanic-blue focus:ring-mechanic-blue"," transition-colors"),disabled:y}),j.first_name&&(0,a.jsx)("p",{className:"text-xs text-reliable-red mt-1",children:j.first_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Last Name"}),(0,a.jsx)("input",{type:"text",name:"last_name",value:b.last_name,onChange:v,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-1 ".concat(j.last_name?"border-reliable-red focus:ring-reliable-red":"border-road-grey-300 focus:border-mechanic-blue focus:ring-mechanic-blue"," transition-colors"),disabled:y}),j.last_name&&(0,a.jsx)("p",{className:"text-xs text-reliable-red mt-1",children:j.last_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",value:b.email,onChange:v,placeholder:"your@email.com",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-1 ".concat(j.email?"border-reliable-red focus:ring-reliable-red":"border-road-grey-300 focus:border-mechanic-blue focus:ring-mechanic-blue"," transition-colors"),disabled:y}),j.email&&(0,a.jsx)("p",{className:"text-xs text-reliable-red mt-1",children:j.email})]})]}),"phone"===l&&(0,a.jsx)(o.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",name:"phone",value:b.phone,onChange:v,placeholder:"0722123456",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-1 ".concat(j.phone?"border-reliable-red focus:ring-reliable-red":"border-road-grey-300 focus:border-mechanic-blue focus:ring-mechanic-blue"," transition-colors"),disabled:y}),(0,a.jsx)("p",{className:"text-xs text-road-grey-600 mt-2",children:"Kenyan format: 0722123456"}),j.phone&&(0,a.jsx)("p",{className:"text-xs text-reliable-red mt-1",children:j.phone})]})}),"password"===l&&(0,a.jsxs)(o.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",name:"password",value:b.password,onChange:v,placeholder:"••••••••",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-1 ".concat(j.password?"border-reliable-red focus:ring-reliable-red":"border-road-grey-300 focus:border-mechanic-blue focus:ring-mechanic-blue"," transition-colors"),disabled:y}),(0,a.jsx)("p",{className:"text-xs text-road-grey-600 mt-2",children:"At least 8 characters"}),j.password&&(0,a.jsx)("p",{className:"text-xs text-reliable-red mt-1",children:j.password})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-road-grey-900 mb-2",children:"Confirm Password"}),(0,a.jsx)("input",{type:"password",name:"password_confirm",value:b.password_confirm,onChange:v,placeholder:"••••••••",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-1 ".concat(j.password_confirm?"border-reliable-red focus:ring-reliable-red":"border-road-grey-300 focus:border-mechanic-blue focus:ring-mechanic-blue"," transition-colors"),disabled:y}),j.password_confirm&&(0,a.jsx)("p",{className:"text-xs text-reliable-red mt-1",children:j.password_confirm})]})]}),"vehicles"===l&&(0,a.jsx)(o.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-road-grey-50 border border-road-grey-300 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-road-grey-900 mb-2",children:"Add your vehicles later in your profile"}),(0,a.jsx)("p",{className:"text-sm text-road-grey-600",children:"This helps us recommend products specifically for your cars"})]})}),(0,a.jsx)(c.A,{variant:"primary",size:"lg",fullWidth:!0,type:"submit",isLoading:y,children:"vehicles"===l?"Create Account":"Next"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-road-grey-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-white text-road-grey-600",children:"Already have an account?"})})]}),(0,a.jsx)(i(),{href:"/auth/login",className:"block",children:(0,a.jsx)(c.A,{variant:"secondary",size:"lg",fullWidth:!0,children:"Log In"})}),(0,a.jsxs)("div",{className:"text-center text-xs text-road-grey-600",children:[(0,a.jsx)("p",{children:"By creating an account, you agree to our"}),(0,a.jsxs)("div",{className:"flex gap-2 justify-center mt-2",children:[(0,a.jsx)(i(),{href:"/terms",className:"text-mechanic-blue hover:underline",children:"Terms of Service"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)(i(),{href:"/privacy",className:"text-mechanic-blue hover:underline",children:"Privacy Policy"})]})]})]})})})}},4659:(e,r,s)=>{"use strict";s.d(r,{Xq:()=>o,Yq:()=>i,g0:()=>l,gh:()=>a,h2:()=>t,w_:()=>n});let a=function(e){let r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!Number.isFinite(e))return"KSh 0";let s=new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:2}).format(e);return r?s.replace("KES","KSh").trim():s.replace("KES","").trim()},t=e=>{let r=e.replace(/\D/g,"");return r.startsWith("0")&&(r="254"+r.substring(1)),r.startsWith("254")||(r="254"+r),r},l=e=>{let r=t(e);return/^254[0-9]{9}$/.test(r)},i=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short",s="string"==typeof e?new Date(e):e;return isNaN(s.getTime())?"Invalid date":s.toLocaleDateString("en-KE","short"===r?{year:"2-digit",month:"short",day:"numeric",timeZone:"Africa/Nairobi"}:{year:"numeric",month:"long",day:"numeric",weekday:"long",timeZone:"Africa/Nairobi"})},n=(e,r)=>r<=0||r>100?e:e*(1-r/100),o=e=>e?(Math.round(10*e)/10).toFixed(1):"—"}},e=>{e.O(0,[619,8,663,44,947,623,358],()=>e(e.s=454)),_N_E=e.O()}]);
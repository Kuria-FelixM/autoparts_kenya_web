"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[447],{63:(e,t,r)=>{var a=r(7260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},508:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},512:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1847:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(2115);let l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:u="",children:c,iconNode:d,...h}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:o?24*Number(n)/Number(s):n,className:l("lucide",u),...h},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:n,...o}=r;return(0,a.createElement)(s,{ref:i,iconNode:t,className:l("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...o})});return r.displayName="".concat(e),r}},6262:(e,t,r)=>{r.d(t,{x:()=>s});var a=r(5988),l=r(9863);let i=(e,t)=>{let r=e.reduce((e,t)=>e+t.unit_price*t.quantity,0);return{subtotal:r,total:r+((null==t?void 0:t.delivery_cost)||0)}},s=(0,a.vt)()((0,l.Zr)((e,t)=>({items:[],delivery:null,guest_email:null,guest_phone:null,subtotal:0,total:0,addItem:t=>{e(e=>{let r,{subtotal:a,total:l}=i(r=e.items.find(e=>e.product_id===t.product_id)?e.items.map(e=>e.product_id===t.product_id?{...e,quantity:e.quantity+t.quantity}:e):[...e.items,t],e.delivery);return{items:r,subtotal:a,total:l}})},removeItem:t=>{e(e=>{let r=e.items.filter(e=>e.product_id!==t),{subtotal:a,total:l}=i(r,e.delivery);return{items:r,subtotal:a,total:l}})},updateQuantity:(r,a)=>{e(e=>{if(a<=0)return t().removeItem(r),e;let l=e.items.map(e=>e.product_id===r?{...e,quantity:a}:e),{subtotal:s,total:n}=i(l,e.delivery);return{items:l,subtotal:s,total:n}})},clearCart:()=>{e({items:[],delivery:null,guest_email:null,guest_phone:null})},setDelivery:t=>{e(e=>{let{subtotal:r,total:a}=i(e.items,t);return{delivery:t,subtotal:r,total:a}})},setGuestInfo:(t,r)=>{e({guest_email:t,guest_phone:r})},getCartCount:()=>t().items.reduce((e,t)=>e+t.quantity,0),calculateTotals:()=>{let r=t(),{subtotal:a,total:l}=i(r.items,r.delivery);e({subtotal:a,total:l})}}),{name:"autoparts-cart",partialize:e=>({items:e.items,delivery:e.delivery,guest_email:e.guest_email,guest_phone:e.guest_phone,subtotal:e.subtotal,total:e.total})}))},6447:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var a=r(5155);r(2115);var l=r(2619),i=r.n(l),s=r(63),n=r(8406),o=r(6262),u=r(1847);let c=(0,u.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var d=r(6651);let h=(0,u.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var m=r(512),v=r(508);let f=()=>{let e=(0,s.usePathname)(),{user:t}=(0,n.n)(),{getCartCount:r}=(0,o.x)(),l=r();if((null==e?void 0:e.startsWith("/auth/"))||(null==e?void 0:e.startsWith("/admin/")))return null;let u=[{label:"Home",href:"/",icon:c,active:"/"===e},{label:"Search",href:"/search",icon:d.A,active:"/search"===e},{label:"Categories",href:"/categories",icon:h,active:"/categories"===e},{label:"Cart",href:"/cart",icon:m.A,active:"/cart"===e,badge:l>0?l:null},{label:t?"Profile":"Sign In",href:t?"/profile":"/auth/login",icon:v.A,active:"/profile"===e||"/auth/login"===e}];return(0,a.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 md:hidden bg-white border-t border-road-grey-300 safe-area-bottom",role:"navigation","aria-label":"Mobile navigation",children:(0,a.jsx)("div",{className:"flex justify-around items-stretch h-16",children:u.map(e=>{let t=e.icon;return(0,a.jsxs)(i(),{href:e.href,className:"flex-1 flex flex-col items-center justify-center gap-1 padding-0 transition-colors relative group ".concat(e.active?"text-mechanic-blue":"text-road-grey-700 hover:text-mechanic-blue"),"aria-current":e.active?"page":void 0,title:e.label,children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(t,{className:"w-6 h-6"}),e.badge&&(0,a.jsx)("span",{className:"absolute -top-2 -right-2 bg-reliable-red text-white text-badge font-montserrat font-bold rounded-full w-5 h-5 flex items-center justify-center text-xs",children:e.badge>9?"9+":e.badge})]}),(0,a.jsx)("span",{className:"text-body-sm font-montserrat font-semibold",children:e.label}),e.active&&(0,a.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-8 h-1 bg-mechanic-blue rounded-t-full"})]},e.href)})})})}},6651:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(1847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8406:(e,t,r)=>{r.d(t,{n:()=>i});var a=r(5988),l=r(9863);let i=(0,a.vt)()((0,l.Zr)((e,t)=>({user:null,tokens:null,isAuthenticated:!1,isLoading:!1,error:null,isOwner:!1,setUser:t=>{e(e=>{var r;return{user:t,isAuthenticated:!!t,isOwner:(null==t||null==(r=t.profile)?void 0:r.is_owner)||!1}})},setTokens:t=>{e({tokens:t})},setLoading:t=>{e({isLoading:t})},setError:t=>{e({error:t})},login:(t,r)=>{e(e=>{var a;return{user:r,tokens:t,isAuthenticated:!0,isOwner:(null==(a=r.profile)?void 0:a.is_owner)||!1,error:null}}),localStorage.setItem("access_token",t.access),localStorage.setItem("refresh_token",t.refresh)},logout:()=>{e({user:null,tokens:null,isAuthenticated:!1,isOwner:!1,error:null}),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")},updateProfile:r=>{e(e=>({user:e.user?{...e.user,profile:{...e.user.profile,...r}}:null,isOwner:void 0!==r.is_owner?r.is_owner:t().isOwner}))},getAccessToken:()=>{var e;return(null==(e=t().tokens)?void 0:e.access)||localStorage.getItem("access_token")},getRefreshToken:()=>{var e;return(null==(e=t().tokens)?void 0:e.refresh)||localStorage.getItem("refresh_token")},checkOwner:()=>t().isOwner}),{name:"autoparts-auth",partialize:e=>({user:e.user,tokens:e.tokens,isAuthenticated:e.isAuthenticated,isOwner:e.isOwner})}))}}]);